{
  "version": 3,
  "sources": ["../log_worker.coffee"],
  "sourcesContent": ["(function() {\n  var file_handle, initialize, write_log_entry;\n\n  file_handle = null;\n\n  initialize = async function(msg) {\n    var dir, file, fs_root, log_dir, log_file;\n    ({dir, file} = msg.data);\n    fs_root = (await navigator.storage.getDirectory());\n    log_dir = (await fs_root.getDirectoryHandle(dir, {\n      create: true\n    }));\n    log_file = (await log_dir.getFileHandle(file, {\n      create: true\n    }));\n    file_handle = (await log_file.createSyncAccessHandle());\n    addEventListener(\"message\", write_log_entry);\n    return self.postMessage(\"initialized\");\n  };\n\n  write_log_entry = function(entry) {\n    if (file_handle == null) {\n      console.error(\"Got a log entry before the file was opened!\");\n      return;\n    }\n    entry = entry.data;\n    entry = JSON.stringify(entry) + \"\\n\";\n    entry = (new TextEncoder()).encode(entry);\n    file_handle.write(entry);\n    return file_handle.flush();\n  };\n\n  addEventListener(\"message\", initialize, {\n    once: true\n  });\n\n}).call(this);\n"],
  "mappings": ";;;;;;;AAAA;AAAA;AAAA,OAAC,WAAW;AACV,YAAI,aAAa,YAAY;AAE7B,sBAAc;AAEd,qBAAa,eAAe,KAAK;AAC/B,cAAI,KAAK,MAAM,SAAS,SAAS;AACjC,WAAC,EAAC,KAAK,KAAI,IAAI,IAAI;AACnB,oBAAW,MAAM,UAAU,QAAQ,aAAa;AAChD,oBAAW,MAAM,QAAQ,mBAAmB,KAAK;AAAA,YAC/C,QAAQ;AAAA,UACV,CAAC;AACD,qBAAY,MAAM,QAAQ,cAAc,MAAM;AAAA,YAC5C,QAAQ;AAAA,UACV,CAAC;AACD,wBAAe,MAAM,SAAS,uBAAuB;AACrD,2BAAiB,WAAW,eAAe;AAC3C,iBAAO,KAAK,YAAY,aAAa;AAAA,QACvC;AAEA,0BAAkB,SAAS,OAAO;AAChC,cAAI,eAAe,MAAM;AACvB,oBAAQ,MAAM,6CAA6C;AAC3D;AAAA,UACF;AACA,kBAAQ,MAAM;AACd,kBAAQ,KAAK,UAAU,KAAK,IAAI;AAChC,kBAAS,IAAI,YAAY,EAAG,OAAO,KAAK;AACxC,sBAAY,MAAM,KAAK;AACvB,iBAAO,YAAY,MAAM;AAAA,QAC3B;AAEA,yBAAiB,WAAW,YAAY;AAAA,UACtC,MAAM;AAAA,QACR,CAAC;AAAA,MAEH,GAAG,KAAK,OAAI;AAAA;AAAA;",
  "names": []
}
