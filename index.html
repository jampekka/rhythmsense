<!DOCTYPE html>
<html lang="en">
<head>
	<script>
const registerServiceWorker = async () => {
  if ("serviceWorker" in navigator) {
    try {
      const registration = await navigator.serviceWorker.register("./serviceworker.js", {});
      if (registration.installing) {
        console.log("Service worker installing");
      } else if (registration.waiting) {
        console.log("Service worker installed");
      } else if (registration.active) {
        console.log("Service worker active");
      }
    } catch (error) {
      console.error(`Registration failed with ${error}`);
    }
  }
};

registerServiceWorker();
		
	</script>
	<link rel="stylesheet" href="dist/style.css">
	<link rel="manifest" href="manifest.json" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body id="main_container" state="instruct" data-bs-theme="dark">
	<div id="instructions">
		<h1 id="instruction">Keep the Rhythm</h1>
		<p><b>Your task is to keep a steady rhythm.</b></p>
		<p> You will first hear a steady metronome beat to follow. Get to the rhythm and start tapping in it.</p>
		<p>The metronome will stop at some point. Keep tapping until you hear a bell.</p>
		<p>Sometimes you will hear an echo of your tap. Try to keep the rhythm regardless.</p>
		<div>
		<input type="text" id="name_input" class="form-control form-control-lg" placeholder="Name (optional)" >
		</div>
		<div class="button_container">
			<div class="flex_spacer"></div>
		<button id="start_button" class="btn btn-success">Loading...</button>
		</div>
		<a id="view_data_button" href="analyze.html" target="_blank">View data</a>
	</div>
	<div id="beatindicatorcontainer">
		<div id="beatindicator"></div>
	</div>
	<div id="feedback_container">
		<h1>Great!</h1>
		<div id="feedback_message"></div>
		<button id="again_button" class="btn btn-success">Next</button>
		<a id="view_data_button" href="analyze.html" target="_blank">View data</a>
	</div>
	<div id="end_container">
		<h1>All done!</h1>
		<div>Thank you for participating.</div>
		<a id="view_data_button" href="analyze.html" target="_blank">View data</a>
	</div>
	<script src="dist/index.js"></script>
</body>
</html>
